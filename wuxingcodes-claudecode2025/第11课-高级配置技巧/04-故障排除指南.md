# æ•…éšœæ’é™¤æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—æ¶µç›–ClaudeCodeä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å®‰è£…é—®é¢˜ã€æ€§èƒ½é—®é¢˜ã€æƒé™é—®é¢˜å’Œé›†æˆé—®é¢˜ç­‰ã€‚

## ç³»ç»Ÿè¯Šæ–­å·¥å…·

### å†…ç½®è¯Šæ–­å‘½ä»¤

ClaudeCodeæä¾›äº†å¼ºå¤§çš„å†…ç½®è¯Šæ–­å·¥å…·ï¼š

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - è·å–å¸®åŠ©éƒ¨åˆ†ï¼‰*

```bash
# ç³»ç»Ÿå¥åº·æ£€æŸ¥
claude /doctor

# æŸ¥çœ‹å½“å‰çŠ¶æ€
claude /status

# æŸ¥çœ‹æƒé™è®¾ç½®
claude /permissions

# æ£€æŸ¥æ¨¡å‹ä¿¡æ¯
claude /model

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
claude /memory
```

### è°ƒè¯•æ¨¡å¼å¯ç”¨

```bash
# å¯ç”¨è°ƒè¯•è¾“å‡º
export CLAUDE_DEBUG=1

# è®¾ç½®æ—¥å¿—çº§åˆ«
export CLAUDE_LOG_LEVEL=debug  # debug, info, warn, error

# å¯åŠ¨ClaudeCode
claude
```

## å®‰è£…é—®é¢˜æ’æŸ¥

### Windowså®‰è£…é—®é¢˜

#### WSLç›¸å…³é—®é¢˜

åœ¨WSLä¸­å¯èƒ½é‡åˆ°çš„å®‰è£…é—®é¢˜ï¼š

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - Windowså®‰è£…é—®é¢˜ï¼‰*

**é—®é¢˜1ï¼šOS/å¹³å°æ£€æµ‹é”™è¯¯**
```bash
# è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®npmé…ç½®
npm config set os linux

# æˆ–å¼ºåˆ¶å®‰è£…
npm install -g @anthropic-ai/claude-code --force --no-os-check
```

**é—®é¢˜2ï¼šNodeæœªæ‰¾åˆ°é”™è¯¯**
```bash
# æ£€æŸ¥Nodeè·¯å¾„
which npm
which node

# å¦‚æœæŒ‡å‘Windowsè·¯å¾„ï¼Œå®‰è£…Linuxç‰ˆNode
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
```

**é—®é¢˜3ï¼šnvmç‰ˆæœ¬å†²çª**
```bash
# åŠ è½½nvmåˆ°shell
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

# ä¿®å¤PATHé¡ºåº
export PATH="$HOME/.nvm/versions/node/$(node -v)/bin:$PATH"
```

### åŸç”Ÿå®‰è£…æ–¹æ¡ˆ

æ¨èä½¿ç”¨åŸç”Ÿå®‰è£…é¿å…npmç›¸å…³é—®é¢˜ï¼š

```bash
# macOS/Linux/WSL
curl -fsSL https://claude.ai/install.sh | bash

# Windows PowerShell
irm https://claude.ai/install.ps1 | iex
```

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - æ¨èè§£å†³æ–¹æ¡ˆï¼‰*

### Linuxå’ŒMacæƒé™é—®é¢˜

```bash
# è¿ç§»åˆ°æœ¬åœ°å®‰è£…ï¼ˆæ— éœ€sudoï¼‰
claude migrate-local

# éªŒè¯å®‰è£…
which claude
claude doctor
```

## è®¤è¯é—®é¢˜è§£å†³

### å¸¸è§è®¤è¯é”™è¯¯

**é”™è¯¯1ï¼šAPIå¯†é’¥æ— æ•ˆ**
```bash
# æ£€æŸ¥APIå¯†é’¥
echo $ANTHROPIC_API_KEY

# é‡æ–°ç™»å½•
claude logout
claude login
```

**é”™è¯¯2ï¼šæƒé™ä¸è¶³**
```bash
# æ£€æŸ¥è´¦æˆ·çŠ¶æ€
claude /status

# æŸ¥çœ‹é…é¢ä¿¡æ¯
claude /quota
```

**é”™è¯¯3ï¼šä¼šè¯è¿‡æœŸ**
```bash
# æ¸…ç†è®¤è¯ä¿¡æ¯
rm -rf ~/.config/claude-code/auth.json

# é‡æ–°è®¤è¯
claude login
```

### ç½‘ç»œè¿æ¥é—®é¢˜

```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
curl -I https://api.anthropic.com

# æ£€æŸ¥ä»£ç†è®¾ç½®
echo $HTTP_PROXY
echo $HTTPS_PROXY

# ä¸´æ—¶ç¦ç”¨ä»£ç†
unset HTTP_PROXY
unset HTTPS_PROXY
claude login
```

## æ€§èƒ½é—®é¢˜è¯Šæ–­

### å“åº”é€Ÿåº¦æ…¢

**ç—‡çŠ¶**ï¼šClaudeCodeå“åº”ç¼“æ…¢æˆ–å¡é¡¿

**è¯Šæ–­æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
ping api.anthropic.com

# 2. æŸ¥çœ‹ç³»ç»Ÿèµ„æº
top | grep claude
htop

# 3. æ£€æŸ¥æ¨¡å‹å“åº”æ—¶é—´
claude /model
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```json
{
  "performance": {
    "model": "haiku",  // ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
    "timeout": 60000,
    "retry_attempts": 3
  }
}
```

### å†…å­˜ä½¿ç”¨è¿‡é«˜

**ç—‡çŠ¶**ï¼šé•¿æ—¶é—´è¿è¡Œåå†…å­˜å ç”¨æŒç»­å¢é•¿

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - æ€§èƒ½å’Œç¨³å®šæ€§ï¼‰*

**è¯Šæ–­**ï¼š
```bash
# ç›‘æ§å†…å­˜ä½¿ç”¨
claude /memory

# æŸ¥çœ‹ä¸Šä¸‹æ–‡å¤§å°
claude /context info
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```json
{
  "performance": {
    "auto_compact": {
      "enabled": true,
      "threshold": 0.6,
      "interval": 180
    }
  }
}
```

### æœç´¢æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**ï¼šæ–‡ä»¶æœç´¢éå¸¸ç¼“æ…¢

**è¯Šæ–­**ï¼š
```bash
# æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ripgrep
which rg
echo $USE_BUILTIN_RIPGREP

# æµ‹è¯•æœç´¢æ€§èƒ½
time claude "æœç´¢testå…³é”®å­—"
```

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - æœç´¢å’Œå‘ç°é—®é¢˜ï¼‰*

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…ripgrep
brew install ripgrep  # macOS
sudo apt install ripgrep  # Ubuntu

# é…ç½®ä½¿ç”¨ripgrep
export USE_BUILTIN_RIPGREP=0
```

## æƒé™é—®é¢˜è§£å†³

### é‡å¤çš„æƒé™æç¤º

**ç—‡çŠ¶**ï¼šé¢‘ç¹æç¤ºç¡®è®¤ç›¸åŒæ“ä½œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹å½“å‰æƒé™
claude /permissions

# æ·»åŠ ä¿¡ä»»å‘½ä»¤
claude /permissions allow git status
claude /permissions allow npm run test

# æˆ–åœ¨é…ç½®ä¸­è®¾ç½®
{
  "permissions": {
    "allowlist": [
      "git status",
      "git diff",
      "npm run test",
      "npm run lint"
    ]
  }
}
```

### æƒé™è¢«æ‹’ç»

**ç—‡çŠ¶**ï¼šæ“ä½œè¢«æ„å¤–æ‹’ç»

**è¯Šæ–­**ï¼š
```bash
# æŸ¥çœ‹è¯¦ç»†æƒé™
claude /permissions verbose

# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat ~/.claude/settings.json
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```json
{
  "permissions": {
    "allowed_dirs": ["./src", "./tests", "./docs"],
    "allowed_commands": ["git", "npm", "node"],
    "default_deny": false
  }
}
```

## IDEé›†æˆé—®é¢˜

### JetBrains IDEæ£€æµ‹å¤±è´¥

**ç—‡çŠ¶**ï¼šWSL2ä¸­æ— æ³•æ£€æµ‹åˆ°JetBrains IDE

*ï¼ˆå¼•ç”¨æ¥æºï¼šæ•…éšœæ’é™¤æ–‡æ¡£ - JetBrains IDEæ£€æµ‹é—®é¢˜ï¼‰*

**è§£å†³æ–¹æ¡ˆ1ï¼šé…ç½®é˜²ç«å¢™**
```powershell
# è·å–WSL2 IP
wsl hostname -I

# åˆ›å»ºé˜²ç«å¢™è§„åˆ™ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰
New-NetFirewallRule -DisplayName "Allow WSL2" `
    -Direction Inbound -Protocol TCP `
    -Action Allow `
    -RemoteAddress 172.21.0.0/16
```

**è§£å†³æ–¹æ¡ˆ2ï¼šé•œåƒç½‘ç»œæ¨¡å¼**
```ini
# ~/.wslconfig
[wsl2]
networkingMode=mirrored
```

### ESCé”®ä¸å·¥ä½œ

**ç—‡çŠ¶**ï¼šåœ¨JetBrainsç»ˆç«¯ä¸­ESCé”®æ— æ³•ä¸­æ–­æ“ä½œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€IDEè®¾ç½® â†’ Tools â†’ Terminal
2. å–æ¶ˆå‹¾é€‰"Move focus to the editor with Escape"
3. æˆ–åˆ é™¤å¯¹åº”çš„é”®ç»‘å®š

## æœç´¢åŠŸèƒ½å¼‚å¸¸

### ripgrepç›¸å…³é—®é¢˜

**ç—‡çŠ¶**ï¼šæœç´¢åŠŸèƒ½ä¸å·¥ä½œæˆ–ç»“æœä¸å®Œæ•´

**è¯Šæ–­**ï¼š
```bash
# æ£€æŸ¥ripgrepå®‰è£…
which rg
rg --version

# æµ‹è¯•ripgrep
rg "test" ./src
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…ripgrep
# macOS
brew install ripgrep

# Ubuntu
sudo apt install ripgrep

# Windows
winget install BurntSushi.ripgrep.MSVC
```

### WSLæœç´¢æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**ï¼šWSLä¸­è·¨æ–‡ä»¶ç³»ç»Ÿæœç´¢ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. ç§»åŠ¨é¡¹ç›®åˆ°Linuxæ–‡ä»¶ç³»ç»Ÿ
mv /mnt/c/project ~/project

# 2. ä½¿ç”¨æ›´ç²¾ç¡®çš„æœç´¢
claude "åœ¨srcç›®å½•æœç´¢test"

# 3. åŸç”ŸWindowsè¿è¡Œ
# é€€å‡ºWSLï¼Œåœ¨Windowsä¸­è¿è¡ŒClaudeCode
```

## é…ç½®æ–‡ä»¶é—®é¢˜

### JSONæ ¼å¼é”™è¯¯

**ç—‡çŠ¶**ï¼šé…ç½®æ–‡ä»¶ä¸ç”Ÿæ•ˆ

**è¯Šæ–­**ï¼š
```bash
# éªŒè¯JSONæ ¼å¼
cat ~/.claude/settings.json | python -m json.tool

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f ~/.claude/logs/claude.log
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨JSONéªŒè¯å·¥å…·
jsonlint ~/.claude/settings.json

# æˆ–ä½¿ç”¨åœ¨çº¿éªŒè¯å·¥å…·
```

### é…ç½®ä¼˜å…ˆçº§é—®é¢˜

**ç—‡çŠ¶**ï¼šé…ç½®è¢«æ„å¤–è¦†ç›–

**ç†è§£ä¼˜å…ˆçº§**ï¼š
1. `./.clauderc`ï¼ˆé¡¹ç›®ï¼‰
2. `./settings.json`ï¼ˆé¡¹ç›®ï¼‰
3. `~/.claude/settings.json`ï¼ˆå…¨å±€ï¼‰
4. ç¯å¢ƒå˜é‡
5. é»˜è®¤é…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹ç”Ÿæ•ˆçš„é…ç½®
claude /status

# æ˜ç¡®æŒ‡å®šé…ç½®æ–‡ä»¶
claude --config ./my-settings.json
```

## MCPæœåŠ¡å™¨é—®é¢˜

### MCPæœåŠ¡å™¨æ— æ³•å¯åŠ¨

**è¯Šæ–­**ï¼š
```bash
# æ£€æŸ¥MCPé…ç½®
cat ~/.claude/settings.json | grep mcpServers

# æµ‹è¯•MCPæœåŠ¡å™¨
node scripts/my-mcp-server.js --test
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```json
{
  "mcpServers": {
    "database": {
      "command": "node",
      "args": ["scripts/db-mcp.js"],
      "env": {
        "DEBUG": "mcp:*"
      }
    }
  }
}
```

### MCPæœåŠ¡å™¨æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**ï¼šMCPæ“ä½œç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```json
{
  "mcpServers": {
    "database": {
      "timeout": 30000,
      "max_retries": 3,
      "cache": {
        "enabled": true,
        "ttl": 300
      }
    }
  }
}
```

## æ¢å¤ç­–ç•¥

### å®Œæ•´é‡ç½®

```bash
#!/bin/bash
# scripts/reset-claude.sh

echo "ğŸ”„ é‡ç½®ClaudeCodeé…ç½®..."

# 1. å¤‡ä»½å½“å‰é…ç½®
BACKUP_DIR="$HOME/.claude.backup.$(date +%Y%m%d_%H%M%S)"
cp -r ~/.claude "$BACKUP_DIR"
echo "âœ… é…ç½®å·²å¤‡ä»½åˆ°: $BACKUP_DIR"

# 2. æ¸…ç†é…ç½®
rm -rf ~/.claude
rm -rf ~/.config/claude-code

# 3. æ¸…ç†ç¯å¢ƒå˜é‡
unset CLAUDE_DEBUG
unset CLAUDE_LOG_LEVEL

# 4. é‡æ–°åˆå§‹åŒ–
claude login

echo "âœ… é‡ç½®å®Œæˆ"
```

### éƒ¨åˆ†é‡ç½®

```bash
# ä»…é‡ç½®æƒé™
claude /permissions reset

# ä»…æ¸…ç†ç¼“å­˜
claude /cache clear

# ä»…é‡ç½®è®¤è¯
rm ~/.config/claude-code/auth.json
```

## æ—¥å¿—åˆ†æ

### æŸ¥çœ‹æ—¥å¿—ä½ç½®

```bash
# æ—¥å¿—ç›®å½•
ls ~/.claude/logs/

# å¸¸ç”¨æ—¥å¿—æ–‡ä»¶
tail -f ~/.claude/logs/claude.log        # ä¸»æ—¥å¿—
tail -f ~/.claude/logs/api.log          # APIè°ƒç”¨æ—¥å¿—
tail -f ~/.claude/logs/security.log     # å®‰å…¨æ—¥å¿—
tail -f ~/.claude/logs/audit.log        # å®¡è®¡æ—¥å¿—
```

### æ—¥å¿—åˆ†æè„šæœ¬

```bash
#!/bin/bash
# scripts/analyze-logs.sh

LOG_DIR="$HOME/.claude/logs"

echo "ğŸ“Š ClaudeCodeæ—¥å¿—åˆ†æ"

# 1. é”™è¯¯ç»Ÿè®¡
echo "âŒ é”™è¯¯ç»Ÿè®¡ï¼š"
grep -c "ERROR" $LOG_DIR/claude.log

# 2. APIè°ƒç”¨ç»Ÿè®¡
echo "ğŸ“¡ APIè°ƒç”¨ç»Ÿè®¡ï¼š"
grep -c "API request" $LOG_DIR/api.log

# 3. æƒé™æ‹’ç»ç»Ÿè®¡
echo "ğŸš« æƒé™æ‹’ç»ï¼š"
grep -c "permission denied" $LOG_DIR/security.log

# 4. æœ€è¿‘çš„é”™è¯¯
echo "ğŸ” æœ€è¿‘çš„é”™è¯¯ï¼š"
tail -n 20 $LOG_DIR/claude.log | grep ERROR
```

## å¸¸è§é”™è¯¯ä»£ç 

### è®¤è¯é”™è¯¯

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| 401 | APIå¯†é’¥æ— æ•ˆ | æ£€æŸ¥å¹¶æ›´æ–°APIå¯†é’¥ |
| 403 | æƒé™ä¸è¶³ | æ£€æŸ¥è´¦æˆ·çŠ¶æ€å’Œé…é¢ |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™ä½è¯·æ±‚é¢‘ç‡ |

### ç½‘ç»œé”™è¯¯

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| ECONNREFUSED | è¿æ¥è¢«æ‹’ç» | æ£€æŸ¥é˜²ç«å¢™è®¾ç½® |
| ETIMEDOUT | è¿æ¥è¶…æ—¶ | æ£€æŸ¥ç½‘ç»œè¿æ¥ |
| ENOTFOUND | DNSè§£æå¤±è´¥ | æ£€æŸ¥DNSè®¾ç½® |

## è·å–å¸®åŠ©

### å†…ç½®å¸®åŠ©ç³»ç»Ÿ

```bash
# æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤
/help

# è·å–ç‰¹å®šå‘½ä»¤å¸®åŠ©
/help <command>

# æŠ¥å‘Šé—®é¢˜
/bug

# å¥åº·æ£€æŸ¥
/doctor
```

### ç¤¾åŒºæ”¯æŒ

- **GitHub Issues**: https://github.com/anthropics/claude-code/issues
- **Discordç¤¾åŒº**: https://discord.gg/anthropic
- **å®˜æ–¹æ–‡æ¡£**: https://code.claude.com/docs

### é—®é¢˜æŠ¥å‘Šæ¨¡æ¿

```markdown
## é—®é¢˜æè¿°
ç®€è¦æè¿°é‡åˆ°çš„é—®é¢˜

## ç¯å¢ƒä¿¡æ¯
- æ“ä½œç³»ç»Ÿï¼š
- ClaudeCodeç‰ˆæœ¬ï¼š
- å®‰è£…æ–¹å¼ï¼š

## é‡ç°æ­¥éª¤
1. æ­¥éª¤1
2. æ­¥éª¤2
3. æ­¥éª¤3

## æœŸæœ›ç»“æœ
æè¿°æœŸæœ›çš„æ­£ç¡®è¡Œä¸º

## å®é™…ç»“æœ
æè¿°å®é™…å‘ç”Ÿçš„æƒ…å†µ

## é™„åŠ ä¿¡æ¯
- é”™è¯¯ä¿¡æ¯
- é…ç½®æ–‡ä»¶
- æ—¥å¿—è¾“å‡º
```

## é¢„é˜²æ€§ç»´æŠ¤

### å®šæœŸæ£€æŸ¥æ¸…å•

- [ ] è¿è¡Œ`claude /doctor`
- [ ] æ£€æŸ¥æƒé™è®¾ç½®
- [ ] æ¸…ç†ç¼“å­˜ï¼ˆ`claude /compact`ï¼‰
- [ ] æ›´æ–°ClaudeCodeç‰ˆæœ¬
- [ ] å¤‡ä»½é…ç½®æ–‡ä»¶
- [ ] æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°

### ç»´æŠ¤è„šæœ¬

```bash
#!/bin/bash
# scripts/maintenance.sh

echo "ğŸ”§ ClaudeCodeç»´æŠ¤ä»»åŠ¡"

# 1. å¥åº·æ£€æŸ¥
echo "è¿è¡Œå¥åº·æ£€æŸ¥..."
claude /doctor

# 2. æ¸…ç†ç¼“å­˜
echo "æ¸…ç†ç¼“å­˜..."
claude /compact
claude /cache clear

# 3. æ£€æŸ¥æ›´æ–°
echo "æ£€æŸ¥æ›´æ–°..."
npm check updates @anthropic-ai/claude-code

# 4. æ¸…ç†æ—¥å¿—
echo "æ¸…ç†æ—§æ—¥å¿—..."
find ~/.claude/logs -name "*.log" -mtime +7 -delete

# 5. å¤‡ä»½é…ç½®
echo "å¤‡ä»½é…ç½®..."
cp ~/.claude/settings.json ~/.claude/settings.json.backup.$(date +%Y%m%d)

echo "âœ… ç»´æŠ¤å®Œæˆ"
```

é€šè¿‡ç³»ç»ŸåŒ–çš„æ•…éšœæ’é™¤æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³ClaudeCodeä½¿ç”¨è¿‡ç¨‹ä¸­çš„å¤§å¤šæ•°é—®é¢˜ï¼Œç¡®ä¿å¼€å‘å·¥ä½œçš„é¡ºåˆ©è¿›è¡Œã€‚