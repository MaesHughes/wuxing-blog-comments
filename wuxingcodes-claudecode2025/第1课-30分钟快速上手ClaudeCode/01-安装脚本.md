# ClaudeCodeå®‰è£…è„šæœ¬

## Windowsä¸€é”®å®‰è£…è„šæœ¬

è„šæœ¬ä½ç½®ï¼š[`scripts/install.bat`](scripts/install.bat)

### ä¸»è¦åŠŸèƒ½
- æ£€æŸ¥Node.jsç¯å¢ƒï¼ˆè¦æ±‚18+ï¼‰
- é€šè¿‡npmå…¨å±€å®‰è£…ClaudeCode
- éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ
- æç¤ºè®¾ç½®APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰
- åˆ›å»ºæµ‹è¯•é¡¹ç›®å¹¶åˆå§‹åŒ–

### ä½¿ç”¨æ–¹æ³•
```batch
# åŒå‡»è¿è¡Œæˆ–åœ¨CMDä¸­æ‰§è¡Œ
scripts\install.bat
```

### å®Œæ•´è„šæœ¬å†…å®¹
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ install.bat å®Œæ•´å†…å®¹</summary>

```batch
@echo off
echo æ­£åœ¨å®‰è£…ClaudeCode...

REM æ£€æŸ¥Node.jsæ˜¯å¦å·²å®‰è£…
node --version >nul 2>&1
if %errorlevel% neq 0 (
    echo é”™è¯¯ï¼šæœªæ£€æµ‹åˆ°Node.jsï¼Œè¯·å…ˆå®‰è£…Node.js 18+
    echo ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org
    pause
    exit /b 1
)

REM å®‰è£…ClaudeCode
echo æ­£åœ¨é€šè¿‡npmå®‰è£…ClaudeCode...
npm install -g @anthropic-ai/claude-code

REM éªŒè¯å®‰è£…
echo éªŒè¯å®‰è£…...
claude --version

if %errorlevel% equ 0 (
    echo.
    echo ========================================
    echo    ClaudeCodeå®‰è£…æˆåŠŸï¼
    echo ========================================
    echo.
    echo ä¸‹ä¸€æ­¥ï¼š
    echo 1. è®¾ç½®APIå¯†é’¥
    set /p api_key=è¯·è¾“å…¥æ‚¨çš„APIå¯†é’¥ï¼ˆsk-ant-å¼€å¤´ï¼‰:
    setx ANTHROPIC_API_KEY "%api_key%"
    echo APIå¯†é’¥å·²è®¾ç½®
    echo.
    echo 2. åˆ›å»ºæµ‹è¯•é¡¹ç›®
    mkdir claude-test
    cd claude-test
    claude init
    echo æµ‹è¯•é¡¹ç›®åˆ›å»ºæˆåŠŸï¼
    echo.
    echo å¼€å§‹ä½¿ç”¨ClaudeCodeå§ï¼
) else (
    echo å®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯
)

pause
```

</details>

## macOS/Linuxä¸€é”®å®‰è£…è„šæœ¬

è„šæœ¬ä½ç½®ï¼š[`scripts/install.sh`](scripts/install.sh)

### ä¸»è¦åŠŸèƒ½
- è‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿç±»å‹
- æ£€æŸ¥å¹¶å®‰è£…Node.jsï¼ˆå¦‚éœ€è¦ï¼‰
- å®‰è£…ClaudeCodeåˆ°å…¨å±€
- æä¾›å½©è‰²è¾“å‡ºå’Œæ¸…æ™°çš„çŠ¶æ€æç¤º
- éªŒè¯å®‰è£…ç»“æœ

### ä½¿ç”¨æ–¹æ³•
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x scripts/install.sh

# è¿è¡Œå®‰è£…è„šæœ¬
./scripts/install.sh
```

### å®Œæ•´è„šæœ¬å†…å®¹
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ install.sh å®Œæ•´å†…å®¹</summary>

```bash
#!/bin/bash

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æ‰“å°å¸¦é¢œè‰²çš„æ¶ˆæ¯
print_message() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

# æ£€æµ‹æ“ä½œç³»ç»Ÿ
detect_os() {
    if [[ "$OSTYPE" == "linux-gnu"* ]]; then
        OS="linux"
    elif [[ "$OSTYPE" == "darwin"* ]]; then
        OS="macos"
    else
        print_error "ä¸æ”¯æŒçš„æ“ä½œç³»ç»Ÿ: $OSTYPE"
        exit 1
    fi
    print_message "æ£€æµ‹åˆ°æ“ä½œç³»ç»Ÿ: $OS"
}

# æ£€æŸ¥Node.js
check_nodejs() {
    if command -v node &> /dev/null; then
        NODE_VERSION=$(node -v | cut -d'v' -f2)
        REQUIRED_VERSION="18.0.0"

        if [ "$(printf '%s\n' "$REQUIRED_VERSION" "$NODE_VERSION" | sort -V | head -n1)" = "$REQUIRED_VERSION" ]; then
            print_message "Node.jsç‰ˆæœ¬: $NODE_VERSION âœ“"
        else
            print_error "Node.jsç‰ˆæœ¬è¿‡ä½: $NODE_VERSIONï¼Œéœ€è¦18.0.0+"
            install_nodejs
        fi
    else
        print_error "æœªæ£€æµ‹åˆ°Node.js"
        install_nodejs
    fi
}

# å®‰è£…Node.js
install_nodejs() {
    print_message "æ­£åœ¨å®‰è£…Node.js..."

    if [[ "$OS" == "macos" ]]; then
        # æ£€æŸ¥Homebrew
        if command -v brew &> /dev/null; then
            brew install node@18
        else
            print_error "è¯·å…ˆå®‰è£…Homebrew: https://brew.sh/"
            exit 1
        fi
    else
        # Linux
        print_message "è¯·è®¿é—® https://nodejs.org ä¸‹è½½Node.js 18+"
        exit 1
    fi
}

# å®‰è£…ClaudeCode
install_claudecode() {
    print_message "æ­£åœ¨å®‰è£…ClaudeCode..."

    if npm install -g @anthropic-ai/claude-code; then
        print_message "ClaudeCodeå®‰è£…æˆåŠŸï¼"
    else
        print_error "ClaudeCodeå®‰è£…å¤±è´¥"
        exit 1
    fi
}

# éªŒè¯å®‰è£…
verify_installation() {
    print_message "éªŒè¯å®‰è£…..."

    if command -v claude &> /dev/null; then
        VERSION=$(claude --version 2>/dev/null || echo "å®‰è£…æˆåŠŸ")
        print_message "ClaudeCodeç‰ˆæœ¬: $VERSION"
        return 0
    else
        print_error "ClaudeCodeæœªæˆåŠŸå®‰è£…"
        return 1
    fi
}

# ä¸»å®‰è£…æµç¨‹
main() {
    echo "========================================"
    echo "    ClaudeCode ä¸€é”®å®‰è£…è„šæœ¬"
    echo "========================================"
    echo

    # æ£€æµ‹æ“ä½œç³»ç»Ÿ
    detect_os

    # æ£€æŸ¥Node.js
    check_nodejs

    # å®‰è£…ClaudeCode
    install_claudecode

    # éªŒè¯å®‰è£…
    if verify_installation; then
        echo
        print_message "âœ… å®‰è£…å®Œæˆï¼"
        echo
        echo "ä¸‹ä¸€æ­¥ï¼š"
        echo "1. è®¾ç½®APIå¯†é’¥ï¼š"
        echo "   export ANTHROPIC_API_KEY='sk-ant-xxx'"
        echo
        echo "2. åˆ›å»ºæµ‹è¯•é¡¹ç›®ï¼š"
        echo "   mkdir claude-test && cd claude-test"
        echo "   claude init"
        echo
        print_message "ğŸ“š æ›´å¤šæ•™ç¨‹ï¼šå…³æ³¨'å¤§ç†ŠæŒé—¨'"
    else
        print_error "å®‰è£…å¤±è´¥ï¼Œè¯·æŸ¥çœ‹é”™è¯¯ä¿¡æ¯"
        exit 1
    fi
}

# è¿è¡Œä¸»ç¨‹åº
main "$@"
```

</details>

## æƒé™ä¿®å¤è„šæœ¬

### macOS/Linuxæƒé™ä¿®å¤

è„šæœ¬ä½ç½®ï¼š[`scripts/fix-permissions.sh`](scripts/fix-permissions.sh)

```bash
#!/bin/bash

# macOS/Linuxæƒé™ä¿®å¤è„šæœ¬

echo "ä¿®å¤npmæƒé™..."

# ä¿®å¤npmç›®å½•æƒé™
sudo chown -R $(whoami) ~/.npm

# ä¿®å¤å…¨å±€æ¨¡å—ç›®å½•æƒé™
sudo chown -R $(whoami) /usr/local/lib/node_modules/

# æˆ–è€…é…ç½®npmä½¿ç”¨ç”¨æˆ·ç›®å½•
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'

# æ·»åŠ åˆ°PATHï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
if ! grep -q 'npm-global/bin' ~/.zshrc 2>/dev/null; then
    echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.zshrc
    echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
fi

echo "æƒé™ä¿®å¤å®Œæˆï¼"
echo "è¯·è¿è¡Œï¼šsource ~/.zshrc æˆ– source ~/.bashrc"
```

### Windows PowerShellæƒé™ä¿®å¤

è„šæœ¬ä½ç½®ï¼š[`scripts/fix-permissions.ps1`](scripts/fix-permissions.ps1)

```powershell
# Windows PowerShellæƒé™ä¿®å¤è„šæœ¬

Write-Host "ä¿®å¤PowerShellæ‰§è¡Œç­–ç•¥..." -ForegroundColor Green

# è®¾ç½®æ‰§è¡Œç­–ç•¥
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser -Force

Write-Host "æ‰§è¡Œç­–ç•¥å·²è®¾ç½®ä¸º RemoteSigned" -ForegroundColor Green

Write-Host "ä¿®å¤npmæƒé™..." -ForegroundColor Green

# è·å–npmå…¨å±€è·¯å¾„
$npmPath = npm config get prefix
$npmBinPath = Join-Path $npmPath "node_modules\.bin"

# æ·»åŠ åˆ°ç”¨æˆ·PATHï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
$userPath = [Environment]::GetEnvironmentVariable("Path", "User")
if ($userPath -notlike "*$npmBinPath*") {
    [Environment]::SetEnvironmentVariable("Path", $userPath + ";" + $npmBinPath, "User")
    Write-Host "npmè·¯å¾„å·²æ·»åŠ åˆ°ç”¨æˆ·PATH" -ForegroundColor Green
}

Write-Host "æƒé™ä¿®å¤å®Œæˆï¼" -ForegroundColor Green
Write-Host "è¯·é‡å¯PowerShellä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆ" -ForegroundColor Yellow
```

## ç½‘ç»œé—®é¢˜è§£å†³è„šæœ¬

### ä½¿ç”¨å›½å†…é•œåƒ

è„šæœ¬ä½ç½®ï¼š[`scripts/fix-network.sh`](scripts/fix-network.sh)

```bash
#!/bin/bash

echo "é…ç½®npmä½¿ç”¨å›½å†…é•œåƒ..."

# è®¾ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

echo "å·²è®¾ç½®ä¸ºæ·˜å®é•œåƒ"

# éªŒè¯é•œåƒè®¾ç½®
npm config get registry

echo ""
echo "å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¢å¤å®˜æ–¹æºï¼š"
echo "npm config set registry https://registry.npmjs.org"
```

### éªŒè¯APIè¿æ¥

è„šæœ¬ä½ç½®ï¼š[`scripts/verify-api.sh`](scripts/verify-api.sh)

```bash
#!/bin/bash

# éªŒè¯APIå¯†é’¥è„šæœ¬

if [ -z "$ANTHROPIC_API_KEY" ]; then
    echo "é”™è¯¯ï¼šæœªè®¾ç½®ANTHROPIC_API_KEYç¯å¢ƒå˜é‡"
    echo "è¯·è¿è¡Œï¼šexport ANTHROPIC_API_KEY='ä½ çš„APIå¯†é’¥'"
    exit 1
fi

echo "éªŒè¯APIè¿æ¥..."

# æµ‹è¯•APIè¿æ¥
response=$(curl -s -w "%{http_code}" -o /dev/null \
    -H "x-api-key: $ANTHROPIC_API_KEY" \
    -H "content-type: application/json" \
    -d '{
        "model": "claude-3-haiku-20240307",
        "max_tokens": 10,
        "messages": [{"role": "user", "content": "Hi"}]
    }' \
    https://api.anthropic.com/v1/messages)

if [ "$response" = "200" ]; then
    echo "âœ… APIè¿æ¥æˆåŠŸï¼"
else
    echo "âŒ APIè¿æ¥å¤±è´¥ï¼ŒHTTPçŠ¶æ€ç ï¼š$response"
    echo "è¯·æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®"
fi
```

## é¡¹ç›®åˆå§‹åŒ–è„šæœ¬

è„šæœ¬ä½ç½®ï¼š[`scripts/init-project.sh`](scripts/init-project.sh)

### ä¸»è¦åŠŸèƒ½
- æ¥å—é¡¹ç›®åç§°ä½œä¸ºå‚æ•°
- åˆ›å»ºæ ‡å‡†é¡¹ç›®ç›®å½•ç»“æ„
- ç”ŸæˆåŸºç¡€é…ç½®æ–‡ä»¶ï¼ˆREADME.mdã€CLAUDE.mdã€.gitignoreï¼‰
- åˆå§‹åŒ–Gitä»“åº“
- ä½¿ç”¨Claudeåˆå§‹åŒ–é¡¹ç›®

### ä½¿ç”¨æ–¹æ³•
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x scripts/init-project.sh

# åˆ›å»ºæ–°é¡¹ç›®
./scripts/init-project.sh my-project-name
```

### å®Œæ•´è„šæœ¬å†…å®¹
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ init-project.sh å®Œæ•´å†…å®¹</summary>

```bash
#!/bin/bash

# é¡¹ç›®åç§°
PROJECT_NAME=$1

if [ -z "$PROJECT_NAME" ]; then
    echo "ç”¨æ³•: ./init-project.sh <é¡¹ç›®åç§°>"
    exit 1
fi

echo "åˆ›å»ºé¡¹ç›®: $PROJECT_NAME"

# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir $PROJECT_NAME
cd $PROJECT_NAME

# åˆ›å»ºåŸºç¡€æ–‡ä»¶ç»“æ„
mkdir -p src tests docs

# åˆ›å»ºREADME.md
cat > README.md << EOF
# $PROJECT_NAME

## é¡¹ç›®æè¿°

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ClaudeCodeåˆ›å»ºçš„é¡¹ç›®ã€‚

## å¼€å‘ç¯å¢ƒ

- Node.js 18+
- ClaudeCode

## å¿«é€Ÿå¼€å§‹

\`\`\`bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘
npm start
\`\`\`
EOF

# åˆ›å»ºCLAUDE.md
cat > CLAUDE.md << EOF
# ClaudeåŠ©æ‰‹é…ç½®

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œä¸“é—¨å¸®åŠ©å¼€å‘è¿™ä¸ªé¡¹ç›®ã€‚

## é¡¹ç›®ä¿¡æ¯
- é¡¹ç›®åç§°ï¼š$PROJECT_NAME
- æŠ€æœ¯æ ˆï¼šæ ¹æ®é¡¹ç›®éœ€è¦ç¡®å®š
- ç¼–ç è§„èŒƒï¼šä½¿ç”¨ESLintå’ŒPrettier

## æ³¨æ„äº‹é¡¹
- æ‰€æœ‰ä»£ç éƒ½è¦æœ‰é€‚å½“çš„æ³¨é‡Š
- éµå¾ªæœ€ä½³å®è·µ
- ç¡®ä¿ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
EOF

# åˆå§‹åŒ–Gitä»“åº“
git init

# åˆ›å»º.gitignore
cat > .gitignore << EOF
# Dependencies
node_modules/

# Build outputs
dist/
build/

# Environment files
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db

# Logs
*.log
npm-debug.log*
EOF

# ä½¿ç”¨Claudeåˆå§‹åŒ–é¡¹ç›®
if command -v claude &> /dev/null; then
    echo "ä½¿ç”¨Claudeåˆå§‹åŒ–é¡¹ç›®..."
    claude init
    echo "é¡¹ç›®åˆå§‹åŒ–å®Œæˆï¼"
else
    echo "è­¦å‘Šï¼šClaudeCodeæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…ClaudeCode"
fi

echo ""
echo "é¡¹ç›® '$PROJECT_NAME' åˆ›å»ºå®Œæˆï¼"
echo "ç›®å½•ç»“æ„ï¼š"
# ä½¿ç”¨lsä»£æ›¿treeï¼Œå› ä¸ºtreeå¯èƒ½æœªå®‰è£…
ls -la
```

</details>